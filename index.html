<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Park Control</title>

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

<link rel="stylesheet" href="style.css?v=3">
<script src="app.js?v=15"></script>
</head>

<body>
  <div class="app">
    <div class="shell">

      <!-- SCREEN 1: ROLE -->
      <section id="screen-role" class="screen active">
        <div class="topbar">
          <div>
            <div class="title">Park Control</div>
            <div class="sub">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</div>
          </div>
          <div class="chip" id="chip-env">Web</div>
        </div>

        <div class="card">
          <div class="sub" style="margin-top:0">
            –ö–∞—Ä–∫–∞—Å WebApp: —Ä–æ–ª–∏ ‚Üí Home ‚Üí –ê–≤—Ç–æ ‚Üí –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–≤—Ç–æ ‚Üí –Ω–∞–∑–∞–¥. –†–∞–±–æ—Ç–∞–µ—Ç –≤ Telegram –∏ –±—Ä–∞—É–∑–µ—Ä–µ.
          </div>

          <div class="btnRow">
            <button class="btn primary" onclick="setRole('owner')">
              <span>üëë –í–ª–∞–¥–µ–ª–µ—Ü</span><span class="muted">‚Üí</span>
            </button>
            <button class="btn" onclick="setRole('manager')">
              <span>üßë‚Äçüíº –ú–µ–Ω–µ–¥–∂–µ—Ä</span><span class="muted">‚Üí</span>
            </button>
            <button class="btn" onclick="setRole('mechanic')">
              <span>üîß –ú–µ—Ö–∞–Ω–∏–∫</span><span class="muted">‚Üí</span>
            </button>
          </div>

          <div class="mini">
            –†–æ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ, –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—Ö–æ–¥–µ –≤—ã–±–∏—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ –Ω–µ –Ω—É–∂–Ω–æ.
          </div>
        </div>
      </section>

      <!-- SCREEN 2: HOME -->
      <section id="screen-home" class="screen">
        <div class="topbar">
          <button class="backBtn" onclick="goTo('role')">‚Üê</button>
          <div class="chip" id="chip-role">—Ä–æ–ª—å</div>
        </div>

        <div class="title" id="home-greet">–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ</div>

        <div class="sectionHeader">
          <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
          <span class="chip" id="chip-upd">–æ–±–Ω–æ–≤–ª–µ–Ω–æ</span>
        </div>

        <div class="grid2" id="stats-grid"></div>

        <div id="finance-wrap">
          <div class="sectionHeader">
            <h3>–§–∏–Ω–∞–Ω—Å—ã</h3>
          </div>
          <div class="grid2" id="finance-grid"></div>
        </div>

        <div class="sectionHeader">
          <h3>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h3>
        </div>

        <div class="navRow">
          <button class="btn primary" onclick="goTo('cars')"><span>üöó –ê–≤—Ç–æ</span><span class="muted">‚Üí</span></button>
          <button class="btn" onclick="goTo('docs')"><span>üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã</span><span class="muted">‚Üí</span></button>
        </div>

        <div class="mini muted">
          (–ü–æ–∑–∂–µ –¥–æ–±–∞–≤–∏–º ‚Äú–í—ã–π—Ç–∏‚Äù. –°–µ–π—á–∞—Å —Ä–æ–ª—å –º–æ–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å –∫–Ω–æ–ø–∫–æ–π ‚Üê —Å–≤–µ—Ä—Ö—É.)
        </div>
      </section>

      <!-- SCREEN 3: CARS LIST -->
      <section id="screen-cars" class="screen">
        <div class="topbar">
          <button class="backBtn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
          <div class="chip">üöó –ê–≤—Ç–æ</div>
        </div>

        <div class="sub" style="margin-top:0">
  –°–ø–∏—Å–æ–∫ –º–∞—à–∏–Ω –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∞–≤—Ç–æ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É.
</div>

<div class="toolbar">
  <input id="cars-q" class="input" placeholder="–ü–æ–∏—Å–∫: –Ω–æ–º–µ—Ä –∏–ª–∏ –º–æ–¥–µ–ª—å" oninput="renderCarsList()" />
  <div class="chips">
    <button class="chipBtn active" onclick="setCarFilter('all', this)">–í—Å–µ</button>
    <button class="chipBtn" onclick="setCarFilter('online', this)">üü¢ –õ–∏–Ω–∏—è</button>
    <button class="chipBtn" onclick="setCarFilter('repair', this)">üîß –†–µ–º–æ–Ω—Ç</button>
    <button class="chipBtn" onclick="setCarFilter('idle', this)">‚è∏ –ü—Ä–æ—Å—Ç–æ–π</button>
    <button class="chipBtn" onclick="setCarFilter('accident', this)">‚ö†Ô∏è –î–¢–ü</button>
  </div>
</div>

<div class="list" id="cars-list"></div>



      </section>

      <!-- SCREEN 4: CAR CARD -->
      <section id="screen-car" class="screen">
        <div class="topbar">
          <button class="backBtn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
          <div class="chip" id="car-chip">–∫–∞—Ä—Ç–æ—á–∫–∞</div>
        </div>

        <div class="title" id="car-title">–ù–æ–º–µ—Ä ‚Äî –º–æ–¥–µ–ª—å</div>
        <div class="sub" id="car-sub">–°—Ç–∞—Ç—É—Å –∏ –ø—Ä–æ—Å—Ç–æ–π</div>

        <div class="section">
          <div class="card" id="car-info"></div>

          <div class="card" id="mech-inspection" style="display:none">
            <div class="title" style="font-size:15px">–û—Å–º–æ—Ç—Ä</div>
            <div class="sub" style="margin-top:6px">–§–æ—Ç–æ, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏ –æ—Ç–º–µ—Ç–∫–∏. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ.</div>

            <div class="field">
              <div class="label">–§–æ—Ç–æ (–Ω–µ—Å–∫–æ–ª—å–∫–æ)</div>
<input class="input" id="insp-photos" type="file" accept="image/*" multiple />
              <div class="thumbs" id="insp-thumbs"></div>
            </div>

            <div class="field">
              <div class="label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</div>
              <textarea class="textarea" id="insp-comment" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Å—Ç—É–∫ —Å–ø—Ä–∞–≤–∞, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ö–æ–¥–æ–≤–∫—É..."></textarea>
            </div>

            <div class="field">
              <div class="label">–°–æ—Å—Ç–æ—è–Ω–∏–µ</div>
              <div class="checks">
                <label class="check"><input type="radio" name="inspState" value="ok" /> ‚úÖ –û–ö</label>
                <label class="check"><input type="radio" name="inspState" value="need" /> üõ† –ù—É–∂–µ–Ω —Ä–µ–º–æ–Ω—Ç</label>
                <label class="check"><input type="radio" name="inspState" value="crit" /> üö® –ö—Ä–∏—Ç–∏—á–Ω–æ</label>
              </div>
            </div>

            <div class="btnRow">
              <button class="btn primary" onclick="saveInspection()">
                <span>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Å–º–æ—Ç—Ä</span><span class="muted">‚úì</span>
              </button>
            </div>

            <div class="mini" id="insp-saved" style="display:none"></div>
          </div>
        </div>
      </section>

      <!-- SCREEN 5: DOCS -->
      <section id="screen-docs" class="screen">
        <div class="topbar">
          <button class="backBtn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
          <div class="chip">üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã</div>
        </div>

        <div class="card">
          <div class="title" style="font-size:15px">–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</div>
          <div class="sub">–°–∫–æ—Ä–æ –¥–æ–±–∞–≤–∏–º —à–∞–±–ª–æ–Ω—ã, –¥–æ–≥–æ–≤–æ—Ä—ã, –î–¢–ü –∏ –ø—Ä–æ—á–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã.</div>
          <div class="btnRow">
            <button class="btn primary" onclick="goBack()"><span>–ù–∞–∑–∞–¥</span><span class="muted">‚Üí</span></button>
          </div>
        </div>
      </section>

    </div>
  </div>

  <div id="toast" class="toast">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</div>
</body>
</html>
