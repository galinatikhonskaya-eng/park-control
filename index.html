
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Park Control</title>

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

<link rel="stylesheet" href="style.css?v=3">
<script src="app.js?v=9999999"></script>
</head>

<body>
  <div class="app">
    <div class="shell">

      <!-- SCREEN 1: ROLE -->
      <section id="screen-role" class="screen active">
        <div class="topbar">
          <div>
            <div class="title">Park Control</div>
            <div class="sub">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</div>
          </div>
          <div class="chip" id="chip-env">Web</div>
        </div>

        <div class="card">
          <div class="sub" style="margin-top:0">
            –ö–∞—Ä–∫–∞—Å WebApp: —Ä–æ–ª–∏ ‚Üí Home ‚Üí –ê–≤—Ç–æ ‚Üí –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–≤—Ç–æ ‚Üí –Ω–∞–∑–∞–¥. –†–∞–±–æ—Ç–∞–µ—Ç –≤ Telegram –∏ –±—Ä–∞—É–∑–µ—Ä–µ.
          </div>

          <div class="btnRow">
            <button class="btn primary" onclick="setRole('owner')">
              <span>üëë –í–ª–∞–¥–µ–ª–µ—Ü</span><span class="muted">‚Üí</span>
            </button>
            <button class="btn" onclick="setRole('manager')">
              <span>üßë‚Äçüíº –ú–µ–Ω–µ–¥–∂–µ—Ä</span><span class="muted">‚Üí</span>
            </button>
            <button class="btn" onclick="setRole('mechanic')">
              <span>üîß –ú–µ—Ö–∞–Ω–∏–∫</span><span class="muted">‚Üí</span>
            </button>
          </div>

          <div class="mini">
            –†–æ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ, –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—Ö–æ–¥–µ –≤—ã–±–∏—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ –Ω–µ –Ω—É–∂–Ω–æ.
          </div>
        </div>
      </section>

      <!-- SCREEN 2: HOME -->
<section id="screen-home" class="screen">
  <!-- –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
  <div class="homeBar">
    <button class="backBtn" onclick="goTo('role')">‚Üê</button>
    <div class="homeTitle">–ê–≤—Ç–æ–ø–∞—Ä–∫ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
    <button class="dotsBtn" type="button" onclick="toast('–ú–µ–Ω—é –ø–æ–∑–∂–µ')">‚Ä¢‚Ä¢‚Ä¢</button>
  </div>

  <!-- –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
  <div class="card helloCard">
    <div class="avatar"></div>
    <div class="helloText">
      <div class="helloH" id="home-greet">–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!</div>
      <div class="helloSub">
        –ù–∞ –ª–∏–Ω–∏–∏: <b id="home-online-drivers">0</b> –≤–æ–¥–∏—Ç–µ–ª–µ–π | <b id="home-total-cars">0</b> –∞–≤—Ç–æ
      </div>
      <div class="chipsRow">
        <div class="chip" id="chip-role">—Ä–æ–ª—å</div>
        <div class="chip chipUpd" id="chip-upd">–æ–±–Ω–æ–≤–ª–µ–Ω–æ</div>
      </div>
    </div>
  </div>

  <!-- –ø–ª–∏—Ç–∫–∏ (–æ–∫–æ—à–µ—á–∫–∏) -->
  <div id="home-tiles" class="tiles">
    <button class="tile" data-screen="docs" type="button">
      <span class="i">üìÑ</span><span class="t">–î–æ–≥–æ–≤–æ—Ä—ã</span>
    </button>

    <button class="tile" data-screen="cars" type="button">
      <span class="i">üöó</span><span class="t">–£—á—ë—Ç –∞–≤—Ç–æ</span>
    </button>

    <button class="tile" data-screen="drivers" type="button">
      <span class="i">üßë‚Äç‚úàÔ∏è</span><span class="t">–í–æ–¥–∏—Ç–µ–ª–∏</span>
    </button>

    <button class="tile" data-screen="payouts" type="button">
      <span class="i">üí≥</span><span class="t">–í—ã–ø–ª–∞—Ç—ã</span>
    </button>

    <button class="tile" data-screen="fines" type="button">
      <span class="i">‚ö†Ô∏è</span><span class="t">–®—Ç—Ä–∞—Ñ—ã</span>
    </button>

    <button class="tile" data-screen="gps" type="button">
      <span class="i">üìç</span><span class="t">GPS –ö–æ–Ω—Ç—Ä–æ–ª—å</span>
    </button>
  </div>

  <!-- –º–∏–Ω–∏-—Å—Ç–∞—Ç—ã -->
  <div class="miniStats">
    <button class="mini" data-carfilter="repair" type="button">
      <span class="i">üöó</span><span class="k">–ê–≤—Ç–æ –≤ —Ä–µ–º–æ–Ω—Ç–µ:</span><b id="home-repair">0</b>
    </button>

    <button class="mini" data-carfilter="accident" type="button">
      <span class="i">‚õëÔ∏è</span><span class="k">–î–¢–ü –∑–∞ –Ω–µ–¥–µ–ª—é:</span><b id="home-dtp">0</b>
    </button>
  </div>

  <!-- —Ñ–∏–Ω–∞–Ω—Å—ã -->
  <div id="home-finance" class="card financeCard">
    <div class="financeTitle">–ë–∞–ª–∞–Ω—Å –∞–≤—Ç–æ–ø–∞—Ä–∫–∞</div>
    <div class="financeValue" id="home-balance">0 ‚ÇΩ</div>

    <div class="financeGrid">
      <div class="fItem">
        <div class="fK">–ü–æ—Ç–µ—Ä–∏ –Ω–∞ —Ä–µ–º–æ–Ω—Ç–µ</div>
        <div class="fV neg" id="home-loss-repair">0 ‚ÇΩ</div>
      </div>
      <div class="fItem">
        <div class="fK">–ü–æ—Ç–µ—Ä–∏ –Ω–∞ –ø—Ä–æ—Å—Ç–æ–µ</div>
        <div class="fV neg" id="home-loss-idle">0 ‚ÇΩ</div>
      </div>
    </div>

    <div class="depositRow">
      <div class="fK">–î–µ–ø–æ–∑–∏—Ç—ã</div>
      <div class="fV" id="home-deposits">0 ‚ÇΩ</div>
    </div>
  </div>

  <!-- –Ω–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
  <nav class="bottomNav">
    <button class="bItem active" data-screen="home" type="button"><span class="bi">üìã</span><span class="bt">–ó–∞—è–≤–∫–∏</span></button>
    <button class="bItem" data-screen="new" type="button"><span class="bi">‚ûï</span><span class="bt">–ù–æ–≤—ã–µ</span></button>
    <button class="bItem" data-screen="notify" type="button"><span class="bi">üîî</span><span class="bt">–£–≤–µ–¥.</span></button>
    <button class="bItem" data-screen="more" type="button"><span class="bi">‚ãØ</span><span class="bt">–ï—â—ë</span></button>
  </nav>
</section>

      <!-- SCREEN 3: CARS LIST -->
      <section id="screen-cars" class="screen">
        <div class="topbar">
          <button class="backBtn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
          <div class="chip">üöó –ê–≤—Ç–æ</div>
        </div>

        <div class="sub" style="margin-top:0">
  –°–ø–∏—Å–æ–∫ –º–∞—à–∏–Ω –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∞–≤—Ç–æ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É.
</div>

<div class="toolbar">
  <input id="cars-q" class="input" placeholder="–ü–æ–∏—Å–∫: –Ω–æ–º–µ—Ä –∏–ª–∏ –º–æ–¥–µ–ª—å" oninput="renderCarsList()" />
<div class="chips">
    <button class="chipBtn active" onclick="setCarFilter('all', this)">–í—Å–µ</button>
    <button class="chipBtn" onclick="setCarFilter('online', this)">üü¢ –õ–∏–Ω–∏—è</button>
    <button class="chipBtn" onclick="setCarFilter('repair', this)">üîß –†–µ–º–æ–Ω—Ç</button>
    <button class="chipBtn" onclick="setCarFilter('idle', this)">‚è∏ –ü—Ä–æ—Å—Ç–æ–π</button>
    <button class="chipBtn" onclick="setCarFilter('accident', this)">‚ö†Ô∏è –î–¢–ü</button>
  </div>
</div>

<div class="list" id="cars-list"></div>



      </section>

      <!-- SCREEN 4: CAR CARD -->
      <section id="screen-car" class="screen">
        <div class="topbar">
          <button class="backBtn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
          <div class="chip" id="car-chip">–∫–∞—Ä—Ç–æ—á–∫–∞</div>
        </div>

        <div class="title" id="car-title">–ù–æ–º–µ—Ä ‚Äî –º–æ–¥–µ–ª—å</div>
        <div class="sub" id="car-sub">–°—Ç–∞—Ç—É—Å –∏ –ø—Ä–æ—Å—Ç–æ–π</div>

        <div class="section">
          <div class="card" id="car-info"></div>

          <div class="card" id="mech-inspection" style="display:none">
            <div class="title" style="font-size:15px">–û—Å–º–æ—Ç—Ä</div>
            <div class="sub" style="margin-top:6px">–§–æ—Ç–æ, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏ –æ—Ç–º–µ—Ç–∫–∏. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ.</div>

            <div class="field">
              <div class="label">–§–æ—Ç–æ (–Ω–µ—Å–∫–æ–ª—å–∫–æ)</div>
<input class="input" id="insp-photos" type="file" accept="image/*" multiple />
              <div class="thumbs" id="insp-thumbs"></div>
            </div>

            <div class="field">
              <div class="label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</div>
              <textarea class="textarea" id="insp-comment" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Å—Ç—É–∫ —Å–ø—Ä–∞–≤–∞, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ö–æ–¥–æ–≤–∫—É..."></textarea>
            </div>

            <div class="field">
              <div class="label">–°–æ—Å—Ç–æ—è–Ω–∏–µ</div>
              <div class="checks">
                <label class="check"><input type="radio" name="inspState" value="ok" /> ‚úÖ –û–ö</label>
                <label class="check"><input type="radio" name="inspState" value="need" /> üõ† –ù—É–∂–µ–Ω —Ä–µ–º–æ–Ω—Ç</label>
                <label class="check"><input type="radio" name="inspState" value="crit" /> üö® –ö—Ä–∏—Ç–∏—á–Ω–æ</label>
              </div>
            </div>

            <div class="btnRow">
              <button class="btn primary" onclick="saveInspection()">
                <span>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Å–º–æ—Ç—Ä</span><span class="muted">‚úì</span>
              </button>
            </div>

            <div class="mini" id="insp-saved" style="display:none"></div>
          </div>
        </div>
      </section>

      <!-- SCREEN 5: DOCS -->
      <section id="screen-docs" class="screen">
        <div class="topbar">
          <button class="backBtn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
          <div class="chip">üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã</div>
        </div>

        <div class="card">
          <div class="title" style="font-size:15px">–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</div>
          <div class="sub">–°–∫–æ—Ä–æ –¥–æ–±–∞–≤–∏–º —à–∞–±–ª–æ–Ω—ã, –¥–æ–≥–æ–≤–æ—Ä—ã, –î–¢–ü –∏ –ø—Ä–æ—á–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã.</div>
          <div class="btnRow">
            <button class="btn primary" onclick="goBack()"><span>–ù–∞–∑–∞–¥</span><span class="muted">‚Üí</span></button>
          </div>
        </div>
      </section>

    </div>
  </div>

  <div id="toast" class="toast">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</div>
</body>
</html>

